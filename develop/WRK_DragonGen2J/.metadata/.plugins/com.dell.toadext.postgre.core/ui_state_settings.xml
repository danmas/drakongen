<?xml version="1.0" encoding="UTF-8"?>
<section name="UI_STATE">
	<section name="d786857b-65f9-4656-a10e-2b9475fdb54a">
		<item value="&lt;list/&gt;" key="EDITORS"/>
		<item value="" key="CONTAINER"/>
	</section>
	<section name="c0686f45-e8cc-4bcf-82c5-c70e9b9baf63">
		<item value="&lt;list&gt;&#x0A;  &lt;SQL__WORKSHEET&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;9&lt;/index&gt;&#x0A;    &lt;content&gt;&lt;/content&gt;&#x0A;    &lt;name&gt;Worksheet 1&lt;/name&gt;&#x0A;  &lt;/SQL__WORKSHEET&gt;&#x0A;  &lt;SQL__WORKSHEET&gt;&#x0A;    &lt;isActive&gt;true&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;10&lt;/index&gt;&#x0A;    &lt;content&gt;&lt;/content&gt;&#x0A;    &lt;name&gt;Worksheet 1&lt;/name&gt;&#x0A;  &lt;/SQL__WORKSHEET&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;11&lt;/index&gt;&#x0A;    &lt;name&gt;users&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors/&gt;&#x0A;    &lt;type&gt;TABLE&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;12&lt;/index&gt;&#x0A;    &lt;name&gt;checkverifycode(integer,character varying)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.checkverifycode (&amp;#xd;&#x0A;   IN p_user_id   integer,&amp;#xd;&#x0A;   IN p_code      CHARACTER VARYING)&amp;#xd;&#x0A;   RETURNS varchar&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   _m_code      varchar;&amp;#xd;&#x0A;   _m_dt_send   timestamp;&amp;#xd;&#x0A;   _p_code      varchar;&amp;#xd;&#x0A;   _p_dt_send   timestamp;&amp;#xd;&#x0A;   _s           varchar;&amp;#xd;&#x0A;   _ans         varchar;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   SELECT code, dt_send&amp;#xd;&#x0A;     INTO _m_code, _m_dt_send&amp;#xd;&#x0A;     FROM verify_code vc&amp;#xd;&#x0A;    WHERE vc.user_id = p_user_id AND vc.code_type::varchar = &amp;apos;E_MAIL&amp;apos;;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   SELECT code, dt_send&amp;#xd;&#x0A;     INTO _p_code, _p_dt_send&amp;#xd;&#x0A;     FROM verify_code vc&amp;#xd;&#x0A;    WHERE vc.user_id = p_user_id AND vc.code_type::varchar = &amp;apos;PHONE&amp;apos;;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   IF (_p_code IS NULL AND _m_code IS NULL)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;            RAISE EXCEPTION USING message=_getMessage(&amp;apos;VERIFY_CODE_NOT_FOUND&amp;apos;)&amp;#xd;&#x0A;                , errcode=_getErrcode(&amp;apos;VERIFY_CODE_NOT_FOUND&amp;apos;);&amp;#xd;&#x0A;   END IF;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   IF (_p_code IS NOT NULL AND _p_code = p_code)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;      _ans :=&amp;#xd;&#x0A;         _isVerifCodeCorrect (p_user_id,&amp;#xd;&#x0A;                              p_code,&amp;#xd;&#x0A;                              _p_code,&amp;#xd;&#x0A;                              &amp;apos;PHONE&amp;apos;,&amp;#xd;&#x0A;                              _p_dt_send);&amp;#xd;&#x0A;&amp;#xd;&#x0A;      IF (_ans = &amp;apos;Y&amp;apos;)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;         RETURN &amp;apos;Y&amp;apos;;&amp;#xd;&#x0A;      ELSIF (_ans = &amp;apos;TIMEOUT&amp;apos;)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;                    RAISE EXCEPTION USING message=_getMessage(&amp;apos;VERIFY_CODE_TIMEOUT&amp;apos;)&amp;#xd;&#x0A;                        , errcode=_getErrcode(&amp;apos;VERIFY_CODE_TIMEOUT&amp;apos;);&amp;#xd;&#x0A;      END IF;&amp;#xd;&#x0A;   ELSIF (_m_code IS NOT NULL AND _m_code = p_code)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;      _ans :=&amp;#xd;&#x0A;         _isVerifCodeCorrect (p_user_id,&amp;#xd;&#x0A;                              p_code,&amp;#xd;&#x0A;                              _m_code,&amp;#xd;&#x0A;                              &amp;apos;E_MAIL&amp;apos;,&amp;#xd;&#x0A;                              _m_dt_send);&amp;#xd;&#x0A;&amp;#xd;&#x0A;      IF (_ans = &amp;apos;Y&amp;apos;)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;         RETURN &amp;apos;Y&amp;apos;;&amp;#xd;&#x0A;      ELSIF (_ans = &amp;apos;TIMEOUT&amp;apos;)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;                 RAISE EXCEPTION USING message=_getMessage(&amp;apos;VERIFY_CODE_TIMEOUT&amp;apos;)&amp;#xd;&#x0A;                    , errcode=_getErrcode(&amp;apos;VERIFY_CODE_TIMEOUT&amp;apos;);&amp;#xd;&#x0A;      END IF;&amp;#xd;&#x0A;   END IF;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   RETURN &amp;apos;N&amp;apos;;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth.checkverifycode(integer,CHARACTER VARYING) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;13&lt;/index&gt;&#x0A;    &lt;name&gt;getuseridbyemail(text)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.getuseridbyemail (IN p_email text)&amp;#xd;&#x0A;   RETURNS int4&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   _ret   int;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   SELECT id&amp;#xd;&#x0A;     INTO _ret&amp;#xd;&#x0A;     FROM users&amp;#xd;&#x0A;    WHERE email = p_email OR new_email = p_email;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   -- raise notice &amp;apos;id for email &amp;quot;%&amp;quot; is &amp;quot;%&amp;quot;&amp;apos;, p_email, v;&amp;#xd;&#x0A;   RETURN _ret;&amp;#xd;&#x0A;EXCEPTION&amp;#xd;&#x0A;   WHEN no_data_found&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;    RAISE EXCEPTION &amp;apos;Не найден пользователь для логина %. &amp;apos;, p_email;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth.getuseridbyemail(text) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;14&lt;/index&gt;&#x0A;    &lt;name&gt;getusersmartname(integer)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.getusersmartname (IN p_user_id integer)&amp;#xd;&#x0A;   RETURNS text&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   _ret   text;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   SELECT first_name || &amp;apos; &amp;apos; || last_name&amp;#xd;&#x0A;     INTO _ret&amp;#xd;&#x0A;     FROM users&amp;#xd;&#x0A;    WHERE id = p_user_id;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   RETURN _ret;&amp;#xd;&#x0A;EXCEPTION&amp;#xd;&#x0A;   WHEN no_data_found&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;    RAISE EXCEPTION &amp;apos;Не найден пользователь с id %. &amp;apos;, p_user_id;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth.getusersmartname(integer) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;15&lt;/index&gt;&#x0A;    &lt;name&gt;registernewuser(character varying,character varying,character varying,character varying,character varying)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.registernewuser (&amp;#xd;&#x0A;   IN p_first_name      CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_last_name       CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_email           CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_phone           CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_password_hash   CHARACTER VARYING)&amp;#xd;&#x0A;   RETURNS int4&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   v     int;&amp;#xd;&#x0A;   cnt   int;&amp;#xd;&#x0A;   _r    company%ROWTYPE;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   -- TODO: ? Возможно нужна проверка на дублирование ФИО&amp;#xd;&#x0A;&amp;#xd;&#x0A;   -- проверка наличия такого&amp;#xd;&#x0A;   IF (p_email IS NOT NULL)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;      SELECT count (*)&amp;#xd;&#x0A;        INTO cnt&amp;#xd;&#x0A;        FROM users&amp;#xd;&#x0A;       WHERE email = p_email;&amp;#xd;&#x0A;&amp;#xd;&#x0A;      IF (cnt != 0)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;            -- raise &amp;apos;Уже существет пользователь с таким е-мэйлом %&amp;apos;, p_email USING ERRCODE = &amp;apos;unique_violation&amp;apos;;&amp;#xd;&#x0A;            RAISE EXCEPTION USING message=_getMessage(&amp;apos;ALREADY_EXIST_USER_WITH_E_MAIL&amp;apos;)&amp;#xd;&#x0A;                , errcode=_getErrcode(&amp;apos;ALREADY_EXIST_USER_WITH_E_MAIL&amp;apos;);&amp;#xd;&#x0A;      END IF;&amp;#xd;&#x0A;   END IF;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   IF (p_phone IS NOT NULL)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;      SELECT count (*)&amp;#xd;&#x0A;        INTO cnt&amp;#xd;&#x0A;        FROM users&amp;#xd;&#x0A;       WHERE phone = p_phone;&amp;#xd;&#x0A;&amp;#xd;&#x0A;      IF (cnt != 0)&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;            -- raise &amp;apos;Уже существет пользователь с таким таким номером телефона %&amp;apos;, p_phone USING ERRCODE = &amp;apos;unique_violation&amp;apos;;&amp;#xd;&#x0A;            RAISE EXCEPTION USING message=_getMessage(&amp;apos;ALREADY_EXIST_USER_WITH_PHONE&amp;apos;)&amp;#xd;&#x0A;                , errcode=_getErrcode(&amp;apos;ALREADY_EXIST_USER_WITH_PHONE&amp;apos;);&amp;#xd;&#x0A;      END IF;&amp;#xd;&#x0A;   END IF;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   INSERT INTO users (first_name,&amp;#xd;&#x0A;                      last_name,&amp;#xd;&#x0A;                      new_email,&amp;#xd;&#x0A;                      new_phone,&amp;#xd;&#x0A;                      password_hash)&amp;#xd;&#x0A;        VALUES (p_first_name,&amp;#xd;&#x0A;                p_last_name,&amp;#xd;&#x0A;                p_email,&amp;#xd;&#x0A;                p_phone,&amp;#xd;&#x0A;                p_password_hash)&amp;#xd;&#x0A;     RETURNING id&amp;#xd;&#x0A;          INTO v;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   -- raise notice &amp;apos;Создан пользователь с id &amp;quot;%&amp;quot;&amp;apos;, v;&amp;#xd;&#x0A;   RETURN v;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth.registernewuser(CHARACTER VARYING,CHARACTER VARYING,CHARACTER VARYING,CHARACTER VARYING,CHARACTER VARYING) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;16&lt;/index&gt;&#x0A;    &lt;name&gt;_setuserstatus(integer,character varying)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.&amp;quot;_setuserstatus&amp;quot; (&amp;#xd;&#x0A;   IN p_user_id   integer,&amp;#xd;&#x0A;   IN p_status    CHARACTER VARYING)&amp;#xd;&#x0A;   RETURNS void&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   UPDATE users&amp;#xd;&#x0A;      SET status = p_status&amp;#xd;&#x0A;    WHERE id = p_user_id;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth._setuserstatus(integer,CHARACTER VARYING) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;17&lt;/index&gt;&#x0A;    &lt;name&gt;setverifycode(integer,character varying,character varying)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_auth&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION carl_auth.setverifycode (&amp;#xd;&#x0A;   IN p_user_id     integer,&amp;#xd;&#x0A;   IN p_code        CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_code_type   CHARACTER VARYING)&amp;#xd;&#x0A;   RETURNS void&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   _id      int;&amp;#xd;&#x0A;   _cnt     int;&amp;#xd;&#x0A;   _vc_id   int;&amp;#xd;&#x0A;   _ct      en_verify_code_type;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   BEGIN&amp;#xd;&#x0A;      _ct = p_code_type::en_verify_code_type;&amp;#xd;&#x0A;   EXCEPTION&amp;#xd;&#x0A;      WHEN OTHERS&amp;#xd;&#x0A;      THEN&amp;#xd;&#x0A;            RAISE EXCEPTION USING message=_getMessage(&amp;apos;VERIFY_CODE_BAD_TYPE&amp;apos;)||p_code_type&amp;#xd;&#x0A;                , errcode=_getErrcode(&amp;apos;VERIFY_CODE_BAD_TYPE&amp;apos;);&amp;#xd;&#x0A;   END;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   DELETE FROM verify_code&amp;#xd;&#x0A;         WHERE user_id = p_user_id AND code_type::varchar = p_code_type;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   SELECT count (*)&amp;#xd;&#x0A;     INTO _cnt&amp;#xd;&#x0A;     FROM verify_code&amp;#xd;&#x0A;    WHERE user_id = p_user_id AND code = p_code;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   IF (_cnt != 0)&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;            RAISE EXCEPTION USING message=_getMessage(&amp;apos;VERIFY_CODE_DUPLICATE&amp;apos;)&amp;#xd;&#x0A;                , errcode=_getErrcode(&amp;apos;VERIFY_CODE_DUPLICATE&amp;apos;);&amp;#xd;&#x0A;   END IF;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   SELECT id&amp;#xd;&#x0A;     INTO _vc_id&amp;#xd;&#x0A;     FROM verify_code&amp;#xd;&#x0A;    WHERE user_id = p_user_id AND code_type::varchar = p_code_type;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   INSERT INTO verify_code (code_type, code, user_id)&amp;#xd;&#x0A;        VALUES (p_code_type::en_verify_code_type, p_code, p_user_id)&amp;#xd;&#x0A;     RETURNING id&amp;#xd;&#x0A;          INTO _id;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   VOLATILE&amp;#xd;&#x0A;   COST 100;&amp;#xd;&#x0A;&amp;#xd;&#x0A;ALTER FUNCTION carl_auth.setverifycode(integer,CHARACTER VARYING,CHARACTER VARYING) OWNER TO carl&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;  &lt;OBJECT__DETAIL&gt;&#x0A;    &lt;isActive&gt;false&lt;/isActive&gt;&#x0A;    &lt;isDirty&gt;false&lt;/isDirty&gt;&#x0A;    &lt;index&gt;18&lt;/index&gt;&#x0A;    &lt;name&gt;_geterrcode(character varying,character varying)&lt;/name&gt;&#x0A;    &lt;parent&gt;carl_comm&lt;/parent&gt;&#x0A;    &lt;selectedTab&gt;0&lt;/selectedTab&gt;&#x0A;    &lt;sourceEditors&gt;&#x0A;      &lt;entry&gt;&#x0A;        &lt;string&gt;Source&lt;/string&gt;&#x0A;        &lt;string&gt;CREATE OR REPLACE FUNCTION &amp;quot;_geterrcode&amp;quot; (&amp;#xd;&#x0A;   IN p_code     CHARACTER VARYING,&amp;#xd;&#x0A;   IN p_locale   CHARACTER VARYING DEFAULT &amp;apos;RU&amp;apos;::CHARACTER VARYING)&amp;#xd;&#x0A;   RETURNS varchar&amp;#xd;&#x0A;AS&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;&amp;#xd;&#x0A;DECLARE&amp;#xd;&#x0A;   _errcode   varchar;&amp;#xd;&#x0A;BEGIN&amp;#xd;&#x0A;   SELECT errcode&amp;#xd;&#x0A;     INTO _errcode&amp;#xd;&#x0A;     FROM message&amp;#xd;&#x0A;    WHERE code = p_code AND locale = p_locale;&amp;#xd;&#x0A;&amp;#xd;&#x0A;   RETURN _errcode;&amp;#xd;&#x0A;EXCEPTION&amp;#xd;&#x0A;   WHEN no_data_found&amp;#xd;&#x0A;   THEN&amp;#xd;&#x0A;    RAISE EXCEPTION &amp;apos;Нет собщения для кода %s&amp;apos;, p_code;&amp;#xd;&#x0A;END&amp;#xd;&#x0A;$BODY$&amp;#xd;&#x0A;   LANGUAGE plpgsql&amp;#xd;&#x0A;   STABLE&amp;#xd;&#x0A;   COST 100&lt;/string&gt;&#x0A;      &lt;/entry&gt;&#x0A;    &lt;/sourceEditors&gt;&#x0A;    &lt;type&gt;FUNCTION&lt;/type&gt;&#x0A;  &lt;/OBJECT__DETAIL&gt;&#x0A;&lt;/list&gt;" key="EDITORS"/>
		<item value="" key="CONTAINER"/>
	</section>
</section>
