
//-- ����� DrakonGen2
	//-- ���������� � DrakonGen2
	/**
  * ���� ����� ������������ ���������� DrakonGen2
  * @author Erv +
*/ 
	//-- package//-- imports
	package ru.erv.drakongen;

import com.tinkerpop.blueprints.pgm.Edge;
import com.tinkerpop.blueprints.pgm.Graph;
import com.tinkerpop.blueprints.pgm.Vertex;
import ru.erv.drakongen.utils.*;
import ru.erv.drakongen.*; 
 
	//-- class DrakonGen2
	public class DrakonGen2_2 { 
	//-- ���������
		public final static String DI_EXT_NEXT = "next";
	public final static String DI_DG_BEG = "DG_BEG";
	public final static String DI_SI_BEG = "SI_BEG";
	public final static String DI_SI_END = "SI_END";
	public final static String DI_CLASS_END = "CLASS_END";
	public final static String DI_COMPIL_BEG = "COMPIL_BEG";
	public final static String DI_COMPIL_END = "COMPIL_END";
	public final static String DI_SH_BEG = "SH_BEG";
	public final static String DI_SH_END = "SH_END"; 
	public final static String DI_PROC_BEG = "PROC_BEG";
	public final static String DI_PROC_END = "PROC_END"; 
	public final static String DI_WR_RES_FILE = "WR_RES_FILE";
	public final static String DI_AC = "AC";		
	public final static String DI_ACTION = "ACTION";		
	public final static String DI_SUB_COMPIL = "SUB_COMPIL";		
	//public final static String DI_IR = "IR";		
	//TODO: ������� DI_ID � DI_IR
	//public final static String DI_EQL = "EQL";		
	//public final static String DI_EQR = "EQR";		
	public final static String DI_IF = "IF";		
	public final static String DI_RY = "RY";		
	public final static String DI_DN = "DN";		
	public final static String DI_EI = "EI";		
	public final static String DI_UK = "UK";		
	public final static String DI_FOR_BEG = "FOR_BEG";		
	public final static String FOR_EACH_BEG = "FOR_EACH_BEG";		
	public final static String DI_FOR_END = "FOR_END";		
	public final static String DI_REF = "REF";
	public final static String DI_BREAK = "BREAK";
	
	public final static String DI_CASE = "CASE";
	public final static String DI_DEFAULT = "DEFAULT";
	public final static String DI_SW = "SWITCH";
	public final static String DI_RETURN = "RETURN";
	public final static String DI_INSERT = "INSERT";
	public final static String DI_OUTPUT = "OUTPUT";
	public final static String DI_NATIVE_CODE = "NATIVE_CODE";
	
	public final static String RELEASE_TYPE_CODE_JAVA = "CODE_JAVA";
	public final static String RELEASE_TYPE_CODE_AS = "CODE_AS";
 
	//-- ����������
	protected String res_str = "";
protected boolean load_finish = false;
protected String CURRENT_RELEASE = null;
protected String commentPrefix = "//-- ";
 // RELEASE_TYPE_CODE_AS; 
	//-- �����������
	public  DrakonGen2() { 
		//-- //--             
		}


	//-- ������ �����
	public String parse_drakon(Graph graph) {
	Object data;
	String descr;
	String di_type;
	
	res_str = ""; 
		//-- �������� �� ���� �����
		for (Vertex v : graph.getVertices()) {
			//-- �������� ��� ����
			di_type = DrakonUtils.getIconType(v); ; 
			//-- ���� ������?
			if(di_type != null && di_type.equals(DI_DG_BEG)) {
				//-- ��������� �� ������ ��� ����������
				setCurReleaseFromNode(v); 
				//-- ---
				DrakonUtils.message("--->������� ����������: " + CURRENT_RELEASE); 
				//-- ���������� CODE_PLSQL ?
				if(CURRENT_RELEASE != null && CURRENT_RELEASE.equals("CODE_PLSQL")) {
					//-- ������� ���������� "--"
					commentPrefix = "-- "; 
					//-- ---
					DrakonUtils.message("--->������� ����������: " + commentPrefix); 
				} else {
				}
				//-- � �������� ���� ���� �����?
				if(DrakonUtils.getOutDegree(v) == 1) {
					//-- ������ ������� ���� ��� �� ������� ��������� �����
					v = DrakonUtils.getOutNode(v,0); 
					//-- ---
					DrakonUtils.message("---> ��������� ������ "); 
					//-- ��������� ���������
					parseSiluet(v); 
				} else {
					//-- � �������� ���� ��� �������?
					if(DrakonUtils.getOutDegree(v) == 0) {
					} else {
						//-- ������! � ����� ������ ...//--  �������!
						DrakonUtils.error("������! � ����� ������ \"" + DrakonUtils.getOutDegree(v) + "\" �������!"); 
						//-- null
						return null; 
					}
				}
			} else {
			}
			}
		//-- -- ����� ���������
		DrakonUtils.message("//-- ����� ���������\n\n "); 
		//-- �������������� ������
		return res_str;
}


	//-- ������ ������ �������
	public void parseSiluet(Vertex node) {
/**
 * ������ ������ ������� ������� 
 * @param	var graph_data
 */ 
		//-- ����������
		Vertex cur_node = node;
String comment = DrakonUtils.getComment(cur_node);
String di_type;
String code = "";
Vertex next_node;
Vertex next_node2 = null;
int level = 0;
String str = "";  
		//-- -psi- n: 
		DrakonUtils.debug("-psi- n: "+DrakonUtils.getComment(cur_node)); 
		//-- �������� ��������� �������� ����
		cur_node = node;
code = geReleaseCode(cur_node);
di_type = DrakonUtils.getIconType(cur_node);
comment = DrakonUtils.getComment(cur_node); 
		//-- ���� ������ �������?
		if(di_type.equals(DI_SI_BEG) || di_type.equals(DI_COMPIL_BEG)) {
			//-- �������� ������� ��������?
			if(isCheckOutputs(cur_node)) {
			} else {
				//-- ��������� ��������� � ������
				str = "������! �� ������ �������� ������� ��� ����� " + comment +" (��� " + di_type+")";
res_str += str; 
				//-- ������! �� ������ �������� ������� ��� ����� 
				DrakonUtils.error(str); 
				//-- //--         
				return; 
			}
		} else {
			//-- ��������� ��������� � ������
			str = "������! ������ ���� ������� ������ ���� \"" + DI_SI_BEG + "\"!\n"
+ "� ���� " + comment +" ����� ��� " + di_type;
res_str += str; 
			//-- ������! ������ ���� ������� ������ ���� ������ �������
			DrakonUtils.error(str); 
			//-- //--         
			return; 
		}
		//-- ������ � ����������� ������� ����� �� //-- � ��������� ��� � ���������
		if(comment != null)	
	comment = comment.replace("\n",commentPrefix);
if(comment != null) 
	res_str += "\n"+commentPrefix + comment + "\n";
if(code != null)	
	res_str += code + "\n"; 
		//-- �������� ����� �� 1 � �� 2?
		if(DrakonUtils.getOutDegree(cur_node) != 1 && DrakonUtils.getOutDegree(cur_node) != 2) {
			//-- ��������� ��������� � ������
			str = "������! � ����� ������ ������� \"" + DrakonUtils.getOutDegree(cur_node) + "\" �������!\n"
+ " ������ ���� 1 ��� 2.\n"; 
			//-- ������! � ����� ������ �������  ������ ���� 1 ��� 2 ������
			DrakonUtils.error(str); 
			//-- //--         
			return; 
		} else {
		}
		//-- �������� ����� 2?
		if(DrakonUtils.getOutDegree(cur_node) == 2) {
			//-- �������� ��� ������ ������
			Vertex v = DrakonUtils.getOutNode(cur_node,0);
di_type = DrakonUtils.getIconType(v);
 
			//-- �� ������ ������ ������ � ����?
			if(di_type.equals(DI_WR_RES_FILE)) {
				//-- ����.����� ����� ��� ��� �� ������ ������, � ������� ������ ��� ��� �� ������
				next_node = DrakonUtils.getOutNode(cur_node,0);
cur_node = DrakonUtils.getOutNode(cur_node,1); 
			} else {
				//-- ����.����� ����� ��� ��� �� ������ ������, � ������� ������ ��� ��� �� ������
				next_node = DrakonUtils.getOutNode(cur_node,1);
cur_node = DrakonUtils.getOutNode(cur_node,0); 
			}
		} else {
			//-- ������! � ����� ������ �������  ������ ���� 2 ������
			DrakonUtils.error("������! � ����� ������ �������  ������ ���� 2 ������"); 
			//-- //--         
			return; 
		}
		//-- ���.����
		cur_node = 
		//-- ��������� ��������� ������
		parceBegGroup(cur_node, level + 1); 
		//-- ���.���� ����� ������?
		if(DrakonUtils.getIconType(cur_node).equals(DI_SUB_COMPIL)) {
			//-- �� ���� ������ ������
			while(cur_node!=null && DrakonUtils.getIconType(cur_node).equals(DI_SUB_COMPIL)) {
				//-- �������� ��������� �������� ����
				code = geReleaseCode(cur_node);
di_type = DrakonUtils.getIconType(cur_node);
comment = DrakonUtils.getComment(cur_node); 
				//-- ��������� ���������� � ��� � ���������
				if(comment != null)
	res_str +=  commentPrefix + comment + "\n";
if(code != null) 
	res_str +=  code + " \n";
 
				//-- � ���.����� 2 ������?
				if(DrakonUtils.getOutDegree(cur_node) == 2
) {
					//-- �� ������ ������ ����� ������?
					if(di_type.equals(DI_SUB_COMPIL)) {
						//-- ����.����� ����� ��� ��� �� ������ ������, � ������� ������ ��� ��� �� ������
						next_node2 = DrakonUtils.getOutNode(cur_node,1);
cur_node = DrakonUtils.getOutNode(cur_node,0); 
					} else {
						//-- ����.����� ����� ��� ��� �� ������ ������, � ������� ������ ��� ��� �� ������
						next_node2 = DrakonUtils.getOutNode(cur_node,0);
cur_node = DrakonUtils.getOutNode(cur_node,1); 
					}
				} else {
					//-- � ���.����� 1 �����?
					if(DrakonUtils.getOutDegree(cur_node) == 1
) {
						//-- ����.����� ����� null, � ������� ��� ��� �� ������
						next_node2 = null;
cur_node = DrakonUtils.getOutNode(cur_node,0); 
					} else {
						//-- ������! � ����� ����� ������ ������ ���� ���� ��� ��� ������.
						str = "������! ������! � ����� ����� ������ \"" + comment + "\" ("+ DrakonUtils.getIconType(cur_node) + ") ������ ���� ���� ��� ��� ������.\n";
DrakonUtils.error(str); 
						//-- //--         
						return; 
					}
				}
				//-- ��� ���.���� ������ �������?
				if(DrakonUtils.getIconType(cur_node).equals(DI_SH_BEG) || DrakonUtils.getIconType(cur_node).equals(DI_PROC_BEG)) {
				} else {
					//-- ���.����
					cur_node = 
					//-- ��������� ��������� ������
					parceBegGroup(cur_node, level + 1); 
				}
				//-- ��������� ������
				parceShampur(cur_node, level + 1); 
				//-- ���.����
				cur_node =
 
				//-- ����.����
				next_node2;
 
				}
		} else {
			//-- ��� ���.���� ������ �������?
			if(DrakonUtils.getIconType(cur_node).equals(DI_SH_BEG) || DrakonUtils.getIconType(cur_node).equals(DI_PROC_BEG)) {
				//-- ��������� ������
				parceShampur(cur_node, level + 1); 
			} else {
				//-- ������! ����������� ��� ����� ������ ���� ����� ������ ��� ������ ���������.
				str = "������! ����������� ��� ����� \"" + comment + "\" ("+ DrakonUtils.getIconType(cur_node) + ") ������ ���� ����� ������ ��� ������ ���������. !n";
DrakonUtils.error(str); 
			}
		}
		//-- ���� ����.����?
		if(next_node != null) {
			//-- ���� ������ � ����?
			if(DrakonUtils.getIconType(next_node).equals(DI_WR_RES_FILE)) {
				//-- ��� �����
				String file_name
 
				//-- �� ����� ������ � ����
				= Settings.getProperty("BASE_DIR") + "\\" +  getCleanReleaseCode(next_node);
 
				//-- ��� ����� ������?
				if(file_name != null && file_name.length() > 0) {
				} else {
					//-- ��������� ��������� � ������
					str = "������. � �����  ������ ����� �� ������ ��� ��������� �����.\n";
res_str += str;
 
					//-- ������. � �����  ������ ����� �� ������ ��� ��������� �����.
					DrakonUtils.error(str); 
					//-- ��� �����
					file_name
 
					//-- ��������� ����
					= "tmp.java";
 
				}
				//-- ----
				DrakonUtils.message("----> ���������� ���� " + file_name + "\n"); 
				//-- ������ � ����//-- 
				FileUtils.fileWrite(file_name, res_str);
 
			} else {
			}
		} else {
			//-- ----
			DrakonUtils.message("----> ��������������. ��������� �� �������� � ����.\n"); 
		}
		//-- ������� ���������
		res_str = ""; 
		//-- //--             
		}


	//-- ��������� ��������� ������
	protected Vertex parceBegGroup(Vertex cur_node, int _level) { 
		//-- ����������
		String comment = DrakonUtils.getComment(cur_node);
String di_type = DrakonUtils.getIconType(cur_node);
String code = geReleaseCode(cur_node);
String spaces = "";
Vertex term_yes;
String str;
Vertex node;
Vertex cur_node_d;  
		//-- -pnx- n: 
		DrakonUtils.debug("-pnx- n: "+DrakonUtils.getComment(cur_node)); 
		//-- ������� ���� null?
		if(cur_node == null) {
			//-- null
			return null; 
		} else {
		}
		//-- � ������ �������� ��������� ���������� �� ������� ������
		for (int i = 0; i < _level; i++)  
	spaces += "\t";
 
		//-- ������������ ������� ������ � ������������ � ����
		if(comment != null)	
	comment = comment.replace("\n",commentPrefix);
//if(code != null)	
//	code = code.replace("\n",commentPrefix);
 
		//-- ��� �������� ���� �� �����?
		if(di_type == null || di_type.length() == 0) {
			//-- ������! �� ����� ��� �����
			DrakonUtils.error("������! �� ����� ��� �����"); 
			//-- null
			return null; 
		} else {
		}
		//-- ��� ����
		switch(di_type) {
			//--  �������(ACTION)
			case DI_ACTION:
				//--  �������(AC)
				case DI_AC:
					//-- ��������� ���������� � ��� � ���������
					if(comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if(code != null) 
	res_str += spaces + code + " \n";
 
					//-- ���� ������?
					if(DrakonUtils.getOutDegree(cur_node) >= 1) {
						//-- ��� ���� �������
						for(int i2 = 0; i2 < DrakonUtils.getOutDegree(cur_node); i2++) {
							//-- �������� ��� ������
							Edge e = DrakonUtils.getOutEdge(cur_node, i2);
 
							//-- ����� ������-���������?
							if(DrakonUtils.isReferenceEdge(e)) {
							} else {
								//-- node
								node 
								//-- ��������� ��������� ������
								 = parceBegGroup(DrakonUtils.getOutNode(cur_node,i2), _level); 
								//-- node
								return node; 
							}
							}
					} else {
					}
					//-- ��������� ��������� � ������
					str = "������! � �������� \"" + comment + "\" ������� ���� �����!\n";
 
					//-- ��������� � ���������
					res_str += spaces + str; 
					//-- "������! � �������� ... ������ ���� �����.
					DrakonUtils.error(str); 
					//-- ���. ����
					return cur_node; 
			//-- ����������� ���
			default:
				//-- ������! ����������� ��� ����� � ��������� ������ 
				str = "������! ����������� ��� ����� \"" + comment + "\" ("+ di_type + ") � ��������� ������. !n";
DrakonUtils.error(str); 
				//-- break
				break; 
			//--  ������ ���������
			case DI_PROC_BEG:
				//--  ������ �������(SH_BEG)
				case DI_SH_BEG:
					//--  ����� ������
					case DI_SUB_COMPIL:
						//-- ���. ����
						return cur_node; 
			//--  ����� ������
			case DI_COMPIL_END:
				//--  ����� �������(SI_END)
				case DI_SI_END:
					//-- ��������� ������ � ��� � ���������
					if (comment != null)
	res_str += spaces +commentPrefix + comment + "\n";
if (code != null)
res_str += spaces +code + "\n"; 
					//-- ���. ����
					return cur_node; 
		}
		//-- null
		return null;
}


	//-- ������ ������ �������
	protected void parceShampur(Vertex node, int  _level) { 
		//-- ����������
		Vertex cur_node;
		String comment;
		String di_type;
		String code;
		String this_comment;
		String spaces = "";
		Vertex next_node; 
 
		//-- � ������ �������� ��������� ���������� �� ������� ������
		for (int i = 0; i < _level; i++)  
			spaces += "\t";
 
		//-- �������� ��������� �������� ����
		cur_node = node;
		code= geReleaseCode(cur_node);
		di_type = DrakonUtils.getIconType(cur_node);
		comment = DrakonUtils.getComment(cur_node);
this_comment = comment; 
 
		//-- -psh- n: 
		DrakonUtils.debug("-psh- n: "+DrakonUtils.getComment(cur_node)); 
		//-- ���� ������ �������?
		if(di_type.equals(DI_SH_BEG) || di_type.equals(DI_PROC_BEG)) {
		} else {
			//-- ���� ����� (�������,������,������)?
			if(di_type.equals(DI_SI_END) ||
di_type.equals(DI_COMPIL_END) ||
di_type.equals(DI_CLASS_END)) {
				//-- ��������� � ��������� ����������� � ��� ���� ��� ����
				if(comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if(code != null) 
	res_str += spaces + code + " \n";
 
				//-- //--         
				return; 
			} else {
				//-- ���� ���� ����?
				if(di_type.equals(DI_NATIVE_CODE)) {
				} else {
					//-- ��������� ��������� � ������
					String str = "������! ������ ���� ������ ���� " + DI_SH_BEG + " � �� "+ di_type + " ����� "+comment+" !";
res_str += spaces + str;
 
					//-- ������! ������ ���� ������ ����  ������ �������
					DrakonUtils.error(str); 
					//-- //--         
					return; 
				}
			}
		}
		//-- ��������� � ��������� ����������� � ��� ���� ��� ����
		if(comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if(code != null) 
	res_str += spaces + code + " \n";
 
		//-- �������� ����� 2?
		if(DrakonUtils.getOutDegree(cur_node) == 2) {
			//-- �������� ��� ������ ������
			Vertex v = DrakonUtils.getOutNode(cur_node,0);
di_type = DrakonUtils.getIconType(v);
 
			//-- �� ������ ������ ������ ������� ��� ����� �������?
			if(di_type.equals(DI_SH_BEG) || di_type.equals(DI_PROC_BEG) || di_type.equals(DI_SI_END) || di_type.equals(DI_COMPIL_END)) {
				//-- ����.����� ����� ��� ��� �� ������ ������, � ������� ������ ��� ��� �� ������
				next_node = DrakonUtils.getOutNode(cur_node,0);
cur_node = DrakonUtils.getOutNode(cur_node,1); 
			} else {
				//-- ����.����� ����� ��� ��� �� ������  ������, � ������� ������ ��� ��� �� �����
				next_node = DrakonUtils.getOutNode(cur_node,1);
cur_node = DrakonUtils.getOutNode(cur_node,0); 
			}
		} else {
			//-- �������� ����� 1?
			if(DrakonUtils.getOutDegree(cur_node) == 1) {
				//-- ����.���� �� �����, � ������� ������ ��� ��� �� ������
				cur_node = DrakonUtils.getOutNode(cur_node,0);
next_node = null; 
			} else {
				//-- ��������� ��������� � ������
				String str = "������! ����� �������� ����� � ������ ������� �� ����� 1 ��� 2\n";
 
				//-- ������! ����� �������� ����� � ������ ������� �� ����� 1 ��� 2
				DrakonUtils.error(str); 
				//-- //--         
				return; 
			}
		}
		//-- ��������� �����
		Vertex term = parceNext(cur_node, _level + 1); 
		//-- �������� ������ ����������?
		if(term == null) {
			//-- ��������� ��������� � ������
			String str = "������! � ������� \"" + this_comment + "\" parceNext() ������ ����� ����������\n";
res_str += str; 
			//-- ������! � ������� ... ������ ����� ����������
			DrakonUtils.error(str); 
		} else {
			//-- ���������� ����� �������?
			if(DrakonUtils.getIconType(term).equals(DI_SI_END) ||
DrakonUtils.getIconType(term).equals(DI_COMPIL_END)) {
			} else {
			}
		}
		//-- ���� ����.����?
		if(next_node != null) {
			//-- !!!!!!!!!!!!!!
			DrakonUtils.error("!!!!!!!!!!!!!!!"); 
			//-- ��� ����.���� ������ �������?
			if(DrakonUtils.getIconType(next_node).equals(DI_SH_BEG) || DrakonUtils.getIconType(next_node).equals(DI_PROC_BEG)) {
				//-- ��������� ����. �������
				parceShampur(next_node,_level); 
			} else {
				//-- ��� ��� �� ����?
				DrakonUtils.error("��� ��� �� ����?"); 
			}
		} else {
		}
		//-- //--             
		}


	//-- ������� ���������� ����
	protected Vertex parceNext(Vertex cur_node, int _level) {
/**
 * @param	cur_node
 * @param	res_str
 * @return terminator - ��������� ���� �� ������� ����������� ��������
 */ 
		//-- ����������
		String comment = DrakonUtils.getComment(cur_node);
String di_type = DrakonUtils.getIconType(cur_node);
String code = geReleaseCode(cur_node);
String spaces = "";
Vertex term_yes;
String str;
Vertex node;
Vertex cur_node_d;  
		//-- -pnx- n: 
		DrakonUtils.debug("-pnx- n: "+DrakonUtils.getComment(cur_node)); 
		//-- ������� ���� null?
		if(cur_node == null) {
			//-- ��������� ��������� � ������
			str = "\n������! ��������� �� ����� \"" + comment + "\" ���� �����������."; 
			//-- ������! ������ ���� ������ ����  ������ �������
			DrakonUtils.error(str); 
			//-- null
			return null; 
		} else {
		}
		//-- � ������ �������� ��������� ���������� �� ������� ������
		for (int i = 0; i < _level; i++)  
	spaces += "\t";
 
		//-- ������������ ������� ������ � ������������ � ����
		if(comment != null)	
	comment = comment.replace("\n",commentPrefix);
//if(code != null)	
//	code = code.replace("\n",commentPrefix);
 
		//-- ��� �������� ���� �� �����?
		if(di_type == null || di_type.length() == 0) {
			//-- � ��������� ���������  ��������������! �� ���������� ��� ����
			res_str += spaces +commentPrefix+" ��������������! �� ���������� ��� ���� \"" + comment + "\" \n"; 
			//-- ��������� ���������� � ��� � ���������
			if(comment != null) 
	res_str += "\n"+commentPrefix + comment + "\n";
if(code != null)	
	res_str += code + "\n"; 
			//-- node
			node 
			//-- ��������� �����
			 = parceNext(DrakonUtils.getOutNode(cur_node,0), _level); 
			//-- node
			return node; 
		} else {
		}
		//-- -pnx- n -2-: 
		DrakonUtils.debug("-pnx- -2- n: "+DrakonUtils.getComment(cur_node)); 
		//-- �������� ������� ��������?
		if(isCheckOutputs(cur_node)) {
		} else {
			//-- ��������� ��������� � ������
			str = "������! �� ������ �������� ������� ��� ����� " + comment +" (��� " + di_type+")";
res_str += str; 
			//-- ������! �� ������ �������� ������� ��� ����� 
			DrakonUtils.error(str); 
		}
		//-- ��� ����
		switch(di_type) {
			//--  ����� ���������
			case DI_PROC_END:
				//--  ����� �������(SH_END)
				case DI_SH_END:
					//-- ��������� ������ � ��� � ���������
					if (comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if (code != null)
res_str += spaces +code + "\n"; 
					//-- ���. ����
					return cur_node; 
			//--  �������(ACTION)
			case DI_ACTION:
				//--  �������(AC)
				case DI_AC:
					//--  �������
					case DI_RETURN:
						//--  �����������
						case DI_BREAK:
							//--  �������
							case DI_INSERT:
								//--  �����
								case DI_OUTPUT:
									//-- ��������� ���������� � ��� � ���������
									if(comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if(code != null) 
	res_str += spaces + code + " \n";
 
									//-- ���� ������?
									if(DrakonUtils.getOutDegree(cur_node) >= 1) {
										//-- ��� ���� �������
										for(int i2 = 0; i2 < DrakonUtils.getOutDegree(cur_node); i2++) {
											//-- �������� ��� ������
											Edge e = DrakonUtils.getOutEdge(cur_node, i2);
 
											//-- ����� ������-���������?
											if(DrakonUtils.isReferenceEdge(e)) {
											} else {
												//-- node
												node 
												//-- ��������� �����
												 = parceNext(DrakonUtils.getOutNode(cur_node,i2), _level); 
												//-- node
												return node; 
											}
											}
									} else {
									}
									//-- ��������� ��������� � ������
									str = "������! � �������� \"" + comment + "\" ������� ���� �����!\n";
 
									//-- ��������� � ���������
									res_str += spaces + str; 
									//-- "������! � �������� ... ������ ���� �����.
									DrakonUtils.error(str); 
									//-- ���. ����
									return cur_node; 
			//--  ������ �����(FOR_BEG)
			case DI_FOR_BEG:
				//-- ���������� �����������  � ��� � ���������
				if (comment != null)
	res_str += spaces +commentPrefix + comment + "\n";
res_str += spaces + code +"\n"; 
				//-- ���� �����?
				if(DrakonUtils.getOutDegree(cur_node) == 1) {
				} else {
					//-- ��������� ��������� � ������
					str = "������! � ������ ����� \"" + comment + "\" ������ ���� ���� �����!\n";
 
					//-- ������! � ������ ����� ... ������ ���� ���� �����!
					DrakonUtils.error(str); 
					//-- ���������� ��������� � ������ � ���������
					res_str += str; 
					//-- ���. ����
					return cur_node; 
				}
				//-- ������ ������� �����.���� 
				cur_node = DrakonUtils.getOutNode(cur_node,0); 
				//-- ����������
				Vertex term 
				//-- ��������� �����
				= parceNext(cur_node, _level + 1); 
				//-- �������� �� ����� �����?
				if(DrakonUtils.getIconType(term).equals(DI_FOR_END)) {
				} else {
					//-- ��������� ��������� � ������
					str = "������! � ����� \"" + comment + "\" ��� �����!\n"; 
					//-- ������! � ����� ... ��� �����!
					DrakonUtils.error(str); 
					//-- ���������� ��������� � ������ � ���������
					res_str += str; 
					//-- ����������
					return term; 
				}
				//-- ���� ����� � �����������?
				if(DrakonUtils.getOutDegree(term) == 1) {
				} else {
					//-- ��������� ��������� � ������
					str = "������! � ����� \"" + comment + "\" ��� ����������� ����!\n"; 
					//-- ������: � ����� ... ��� ����������� ����.
					DrakonUtils.error(str); 
					//-- ���������� ��������� � ������ � ���������
					res_str += str;
 
					//-- ����������
					return term; 
				}
				//-- ������ ������� ����� �����������
				cur_node = DrakonUtils.getOutNode(term,0);  
				//-- node
				node 
				//-- ��������� �����
				 = parceNext(cur_node, _level); 
				//-- node
				return node; 
			//-- ����������� ���
			default:
				//-- ��������� ��������� � ������
				str = "������! ����������� ��� ����� \"" + comment + "\" ("+ di_type + ")!n"; 
				//-- ������! ����������� ��� ����� ...
				DrakonUtils.error(str); 
				//-- break
				break; 
			//--  ����� �����(FOR_END)
			case DI_FOR_END:
				//-- ��� ����?
				if(code != null) {
					//-- ��������� ������ � ��� � ���������
					if (comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if (code != null)
res_str += spaces +code + "\n"; 
				} else {
					//-- ��������� "}"
					res_str += spaces + "}" + "\n"; 
				}
				//-- ���. ����
				return cur_node; 
			//--  DEFAULT
			case DI_DEFAULT:
				//-- ���������� default ��������� � ���������
				res_str += spaces +commentPrefix + comment + "\n";
res_str += spaces +"default:\n"; 
				//-- ������ ������� �����.���� 
				cur_node = DrakonUtils.getOutNode(cur_node,0);  
				//-- term_yes
				term_yes 
				//-- ��������� �����
				= parceNext(cur_node, _level + 1); 
				//-- ����������
				return term_yes; 
			//--  �������(IF)
			case DI_IF:
				//-- ����������
				//{
//String di_type_edge;
int i = 0;
Vertex term_no = null; 
				//-- ���������� CODE_PLSQL ?
				if(CURRENT_RELEASE != null && CURRENT_RELEASE.equals("CODE_PLSQL")) {
					//-- ���������� if ��������� � ��������� then
					res_str += spaces +commentPrefix + comment + "\n";
res_str += spaces +"if(" + code + ") then\n"; 
				} else {
					//-- ���������� if ��������� � ��������� {
					res_str += spaces +commentPrefix + comment + "\n";
res_str += spaces +"if(" + code + ") {\n"; 
				}
				//-- ��� ������?
				if(DrakonUtils.getOutDegree(cur_node) == 2) {
				} else {
					//-- ��������� ��������� � ������
					str = "������! � �������� \"" + comment + "\" ������� ���� ��� ������!\n";
res_str += spaces + str; 
					//-- ������! � �������� ... ������� ���� ��� ������!
					DrakonUtils.error(str); 
				}
				//-- ����� ������ �����, ���������� ��� ���
				Edge edge = DrakonUtils.getOutEdge(cur_node,0);
i = 0; 
				//-- ��� �� ��?
				if(!DrakonUtils.isEdgeYes(edge)) {
					//-- �� ��� �����, ����� ���������
					edge = DrakonUtils.getOutEdge(cur_node,1);
i = 1; 
				} else {
				}
				//-- ��� �� ��?
				if(!DrakonUtils.isEdgeYes(edge)) {
					//-- ��������� ��������� � ������
					str = "������! � �������� \"" + comment + "\" ������ ���� �� �����!"; 
					//-- ������! � �������� ... ������ ���� �� �����!
					DrakonUtils.error(str); 
					//-- null
					return null; 
				} else {
				}
				//-- ������������ ����� ��
				cur_node_d = DrakonUtils.getOutNode(cur_node,i);
term_yes = parceNext(cur_node_d, _level + 1);
 
				//-- ���������� CODE_PLSQL ?
				if(CURRENT_RELEASE != null && CURRENT_RELEASE.equals("CODE_PLSQL")) {
					//-- ���������� � ��������� "else"
					res_str += spaces +"else \n";
 
					//-- ������������ ����� ���
					if (i == 0) {
	cur_node_d = DrakonUtils.getOutNode(cur_node,1);
} else {
	cur_node_d = DrakonUtils.getOutNode(cur_node,0);
}
term_no = parceNext(cur_node_d, _level+1);
 
					//-- ���������� � ��������� end if
					res_str += spaces +"end if;\n";
 
				} else {
					//-- ���������� � ��������� "} else {"
					res_str += spaces +"} else {\n";
 
					//-- ������������ ����� ���
					if (i == 0) {
	cur_node_d = DrakonUtils.getOutNode(cur_node,1);
} else {
	cur_node_d = DrakonUtils.getOutNode(cur_node,0);
}
term_no = parceNext(cur_node_d, _level+1);
 
					//-- ���������� � ��������� "}"
					res_str += spaces +"}\n";
 
				}
				//-- �������� ���� ������ ���� 
				if (DrakonUtils.getIconType(term_yes).equals(DI_SH_END) &&
!DrakonUtils.getIconType(term_no).equals(DI_SH_END)) 
term_yes = term_no; 
				//-- ������ ����� ����� ������� � ������ ���?
				if(DrakonUtils.getIconType(term_yes).equals(DI_SH_END) &&
!DrakonUtils.getIconType(term_no).equals(DI_SH_END)) {
					//-- ������ ������� ������ �����
					term_yes = term_no; 
				} else {
				}
				//-- ��������� ���������� null?
				if(term_yes == null) {
					//-- null
					return null; 
				} else {
				}
				//-- ��������� ���������� ����� �����?
				if(DrakonUtils.getIconType(term_yes).equals(DI_FOR_END)) {
					//-- ����������
					return term_yes; 
				} else {
				}
				//-- � ����������� 1 �����?
				if(DrakonUtils.getOutDegree(term_yes) == 1) {
					//-- ������ ������� ���� ������ �� �����������
					cur_node = DrakonUtils.getOutNode(term_yes,0); 
					//-- node
					node 
					//-- ��������� �����
					 = parceNext(cur_node, _level); 
					//-- node
					return node; 
				} else {
					//-- ���������� ����� �������?
					if(di_type.equals(DI_SH_END) || di_type.equals(DI_PROC_END)) {
					} else {
						//-- ��������� ��������������
						str = commentPrefix + " ��������������!   ���������� �������� \"" + comment +"\" ����� "+ DrakonUtils.getOutDegree(term_yes) +" �������. ������ ���� ����. \n";
 
						//-- ��������������!   ���������� �������� ... ����� ... �������. ������ ���� ����.
						DrakonUtils.message(str); 
					}
					//-- ����������
					return term_yes; 
				}
			//--  ����� ������
			case DI_COMPIL_END:
				//--  ����� �������(SI_END)
				case DI_SI_END:
					//-- ��������� ������ � ��� � ���������
					if (comment != null)
	res_str += spaces + commentPrefix + comment + "\n";
if (code != null)
res_str += spaces +code + "\n"; 
					//-- ���. ����
					return cur_node; 
			//--  �����(SWITCH)
			case DI_SW:
				//-- ���������� switch ��������� � ���������
				res_str += spaces + commentPrefix + comment + "\n";
res_str += spaces +"switch(" + code + ") {\n"; 
				//-- ���������� ����������
				term_yes = null; 
				//-- � ���� switch ���� ����� � ��� �����?
				if(DrakonUtils.getOutDegree(cur_node)==1 && DrakonUtils.getIconType(DrakonUtils.getOutNode(cur_node, 0)).equals(DrakonUtils.DI_EI)) {
					//-- ������ ������� ���� �����
					cur_node = DrakonUtils.getOutNode(cur_node, 0); 
				} else {
				}
				//-- ������������ ��� case �����
				for(int is2 = 0; is2 < DrakonUtils.getOutDegree(cur_node); is2++) {
					//-- �������� ������ ���������� ��������� ����
					cur_node_d = DrakonUtils.getOutNode(cur_node,is2);

code = geReleaseCode(cur_node_d);
di_type = DrakonUtils.getIconType(cur_node_d); 
					//-- ���  CASE ��� DEFAULT?
					if(di_type.equals(DI_CASE) 
|| di_type.equals(DI_DEFAULT)) {
						//-- term_yes
						term_yes 
						//-- ��������� �����
						= parceNext(cur_node_d, _level + 1); 
					} else {
						//-- ��������� ��������� � ������
						str = "������! � ����� ����� \"" + comment + "\" ��� ����� ������ ����� � Case ������!"; 
						//-- ������! � ����� ����� ... ��� ����� ������ ����� � Case ������!
						DrakonUtils.error(str); 
						//-- ���������� � ��������� ���������
						res_str += spaces + str; 
						//-- null
						return null; 
					}
					}
				//-- ���������� � ��������� ����� "}"
				res_str += spaces +"}\n"; 
				//-- ���������� ����?
				if(term_yes == null) {
					//-- null
					return null; 
				} else {
				}
				//-- � ����������� 1 �����?
				if(DrakonUtils.getOutDegree(term_yes) == 1) {
					//-- ������� ���� ����� �� �����������
					cur_node = DrakonUtils.getOutNode(term_yes,0); 
					//-- node
					node 
					//-- ��������� �����
					 = parceNext(cur_node, _level); 
					//-- node
					return node; 
				} else {
					//-- ���������� ����� �������?
					if(di_type.equals(DI_SH_END) || di_type.equals(DI_PROC_END)) {
					} else {
						//-- ��������� ��������������
						str = commentPrefix + "��������������!   ���������� �������� \"" + comment +"\" ����� "+ DrakonUtils.getOutDegree(term_yes) +" �������. ������ ���� ����. \n";
 
						//-- ��������������!   ���������� �������� ... ����� ... �������. ������ ���� ����.
						DrakonUtils.message(str); 
					}
					//-- ����������
					return term_yes; 
				}
			//--  CASE
			case DI_CASE:
				//-- ���������� case ��������� � ���������
				res_str += spaces +commentPrefix+" " + comment + "\n";
res_str += spaces +"case " + code + ":\n"; 
				//-- ������ ������� �����.���� 
				cur_node = DrakonUtils.getOutNode(cur_node,0);  
				//-- term_yes
				term_yes 
				//-- ��������� �����
				= parceNext(cur_node, _level + 1); 
				//-- ����������
				return term_yes; 
			//--  ����� �������(EI)
			case DI_EI:
				//-- ���. ����
				return cur_node; 
			//--  ������ ���������
			case DI_PROC_BEG:
				//--  ������ �������(SH_BEG)
				case DI_SH_BEG:
					//-- ���. ����
					return cur_node; 
		}
		//-- null
		return null;
}



	//-- ��������� �������� ���� ���� � ��������
	public String geReleaseCode(Vertex node) { 
		//-- ����� �� ��� ��� ��� ����?
		if(DrakonUtils.getIconType(node).equals(DI_EI) /*||
DrakonUtils.getIconType(node).equals(DI_FOR_END)*/) {
			//-- ""
			return ""; 
		} else {
		}
		//-- � ����� ��� ����������?
		if(DrakonUtils.getComment(node).equals("")) {
			//-- ""
			return ""; 
		} else {
		}
		//-- ����������
		String code = ""; 
		//-- ���������� �����������?
		if(CURRENT_RELEASE != null && CURRENT_RELEASE.length() != 0) {
			//-- ��� ���� ������
			for(int i = 0; i < DrakonUtils.getInDegree(node); i++) {
				//-- �������� ������� ����
				Vertex in_node = DrakonUtils.getInNode(node,i); 
				//-- ��� ���� ������� ����������?
				if(DrakonUtils.getIconType(in_node).equals(CURRENT_RELEASE)) {
					//-- �������� ��� �� ����. ����
					code = DrakonUtils.getCode(in_node); 
					//-- ���� ������?
					if(DrakonUtils.getCodeMark(in_node).length() > 0) {
						//-- ��������� � ���� ������
						
//<DG2J code_mark="n1144:SPECIAL_DG2J_MARK" >
code = "\n//<DG2J code_mark=\"n"+ (String) in_node.getId() + ":" + DrakonUtils.getCodeMark(in_node) + "\" >\n"
+ code + "\n"
+ "//</DG2J>\n";

//</DG2J>
 
					} else {
					}
					//-- ���
					return code; 
				} else {
				}
				}
			//-- �������� ��� �� �������� ����
			code = DrakonUtils.getCode(node); 
		} else {
			//-- �������� ��� �� �������� ����
			code = DrakonUtils.getCode(node); 
			//-- ���� ������?
			if(DrakonUtils.getCodeMark(node).length() > 0) {
				//-- ��������� � ���� ������
				
//<DG2J code_mark="n1118:SPECIAL_DG2J_MARK" >
code = "\n//<DG2J code_mark=\"n"+ (String) node.getId() + ":" + DrakonUtils.getCodeMark(node) + "\" >\n"
+ code + "\n"
+ "//</DG2J>\n";

//</DG2J>
 
			} else {
			}
		}
		//-- ���
		return code;
}


	//-- ��������� �������� ���� ���� ��� �������
	public String getCleanReleaseCode(Vertex node) { 
		//-- ����� �� ��� ��� ��� ����?
		if(DrakonUtils.getIconType(node).equals(DI_EI)  /*|| DrakonUtils.getIconType(node).equals(DI_FOR_END)*/) {
			//-- ""
			return ""; 
		} else {
		}
		//-- � ����� ��� ����������?
		if(DrakonUtils.getComment(node).equals("")) {
			//-- ""
			return ""; 
		} else {
		}
		//-- ����������
		String code = ""; 
		//-- ���������� �����������?
		if(CURRENT_RELEASE != null && CURRENT_RELEASE.length() != 0) {
			//-- ��� ���� ������
			for(int i = 0; i < DrakonUtils.getInDegree(node); i++) {
				//-- �������� ������� ����
				Vertex in_node = DrakonUtils.getInNode(node,i); 
				//-- ��� ���� ������� ����������?
				if(DrakonUtils.getIconType(in_node).equals(CURRENT_RELEASE)) {
					//-- �������� ��� �� ����. ����
					code = DrakonUtils.getCode(in_node); 
					//-- ���
					return code; 
				} else {
				}
				}
			//-- �������� ��� �� ����. ����
			code = DrakonUtils.getCode(node); 
		} else {
			//-- �������� ��� �� �������� ����
			code = DrakonUtils.getCode(node); 
		}
		//-- ���
		return code;
}



	//-- �������� ������� �����
	public boolean isCheckOutputs(Vertex node) { 
		//-- ����������
		Vertex cur_node;
Object data;
String comment;
String di_type;
String code;
int type;
//Edge edge;
Vertex next_node;
int level = 0;
String str = "";
Vertex out_1 = null;
Vertex out_2 = null; 
		//-- �������� ��������� �������� ����
		cur_node = node;
code = geReleaseCode(cur_node);
di_type = DrakonUtils.getIconType(cur_node);
comment = DrakonUtils.getComment(cur_node); 
		//-- ����� �� ��� ��� ��� ������?
		if(di_type.equals(DI_SH_END) 
|| di_type.equals(DI_PROC_END) 
|| di_type.equals(DI_SI_END) 
|| di_type.equals(DI_CLASS_END)) {
			//-- �������� ����� 0?
			if(DrakonUtils.getOutDegree(cur_node) == 0) {
			} else {
				//-- ��������� �������! � ����� ... �� ���� �����.
				str = "��������� �������! � ����� \"" + comment + "\"  �� ���� �����.\n";
DrakonUtils.error(str); 
				//-- ������
				return false; 
			}
		} else {
			//-- ����� �� ��� ��� � ����� �������?
			if(di_type.equals(DI_ACTION) 
|| di_type.equals(DI_AC) 
|| di_type.equals(DI_EI) 
|| di_type.equals(DI_DG_BEG)
|| di_type.equals(DI_CASE)
|| di_type.equals(DI_DEFAULT)
|| di_type.equals(DI_FOR_BEG)
|| di_type.equals(DI_FOR_END)
|| di_type.equals(DI_BREAK)
|| di_type.equals(DI_OUTPUT)
|| di_type.equals(DI_INSERT)) {
				//-- �������� ����� 1?
				if(DrakonUtils.getOutDegree(cur_node) == 1) {
				} else {
					//-- ��������� �������! � ����� ... �� ���� �����.
					str = "��������� �������! � ����� \"" + comment + "\"  �� ���� �����.\n";
DrakonUtils.error(str); 
					//-- ������
					return false; 
				}
				//-- ������� ������ �����
				out_1 = DrakonUtils.getOutNode(cur_node,0); 
				//-- ��� ����
				switch(di_type) {
					//--  �������(ACTION)
					case DI_ACTION:
						//--  �������(AC)
						case DI_AC:
							//-- ��� ����� ������?
							if(DrakonUtils.getIconType(out_1).equals(DI_SUB_COMPIL)) {
								//-- ������
								return true; 
							} else {
							}
							//--  ����� �������(EI)
							case DI_EI:
								//--  �����������
								case DI_BREAK:
									//--  �������
									case DI_INSERT:
										//--  �����
										case DI_OUTPUT:
											//-- ��� �������?
											if(DrakonUtils.getIconType(out_1).equals(DI_CASE)) {
												//-- ������
												return true; 
											} else {
											}
											//-- ��� �� ������ RG_B ��� ����������?
											if(DrakonUtils.getIconType(out_1).equals(DI_ACTION) 
|| DrakonUtils.getIconType(out_1).equals(DI_SW) 
|| DrakonUtils.getIconType(out_1).equals(DI_IF) 
|| DrakonUtils.getIconType(out_1).equals(DI_EI) 
|| DrakonUtils.getIconType(out_1).equals(DI_BREAK)
|| DrakonUtils.getIconType(out_1).equals(DI_OUTPUT)
|| DrakonUtils.getIconType(out_1).equals(DI_INSERT)) {
											} else {
												//-- ��� �� ������ RG_�?
												if(DrakonUtils.getIconType(out_1).equals(DI_PROC_END) 
|| DrakonUtils.getIconType(out_1).equals(DI_SH_END) 
|| DrakonUtils.getIconType(out_1).equals(DI_RETURN) ) {
												} else {
													//-- ��� �� ������ RG_D?
													if(DrakonUtils.getIconType(out_1).equals(DI_FOR_BEG) 
|| DrakonUtils.getIconType(out_1).equals(DI_FOR_END)) {
													} else {
														//-- ��� ������ ���������?
														if(DrakonUtils.getIconType(out_1).equals(DI_PROC_BEG) 
|| DrakonUtils.getIconType(out_1).equals(DI_SH_BEG)) {
														} else {
															//-- ��������� ������� ��������! � ����� ... �������� ��� ������.
															str = "��������� ������� ��������! � ����� \"" + comment + "\"  �������� ��� ������ ("+ DrakonUtils.getIconType(out_1)+").\n";
DrakonUtils.error(str); 
														}
													}
												}
											}
											//-- break
											break; 
					//--  CASE
					case DI_CASE:
						//--  DEFAULT
						case DI_DEFAULT:
							//-- ��� �� ������ RG_B  ��� ������� ��� ������ ����� ��� �������?
							if(DrakonUtils.getIconType(out_1).equals(DI_ACTION) 
|| DrakonUtils.getIconType(out_1).equals(DI_SW) 
|| DrakonUtils.getIconType(out_1).equals(DI_IF) 
|| DrakonUtils.getIconType(out_1).equals(DI_RETURN)
|| DrakonUtils.getIconType(out_1).equals(DI_FOR_BEG)
|| DrakonUtils.getIconType(out_1).equals(DI_CASE)
|| DrakonUtils.getIconType(out_1).equals(DI_BREAK)
|| DrakonUtils.getIconType(out_1).equals(DI_OUTPUT)
|| DrakonUtils.getIconType(out_1).equals(DI_INSERT)) {
							} else {
								//-- ��������� ������� �������! � ����� ... �������� ��� ������.
								str = "��������� ������� �������! � ����� \"" + comment + "\"  �������� ��� ������ ("+ DrakonUtils.getIconType(out_1) +").\n";
DrakonUtils.error(str); 
							}
							//-- break
							break; 
					//-- ������ ���
					default:
						//-- -1- D- �������� ������ ������� �� �����������  
						DrakonUtils.message("�������� ������ ������� �� �����������  "+DrakonUtils.getIconType(cur_node) + "�����:" + DrakonUtils.getComment(cur_node) + "\n"); 
						//-- break
						break; 
				}
			} else {
				//-- ��� ����
				switch(di_type) {
					//--  ����� ������
					case DI_SUB_COMPIL:
						//-- �������� ����� 2?
						if(DrakonUtils.getOutDegree(cur_node) == 2) {
							//-- ����� ������� ������ �� �������
							out_1 = DrakonUtils.getOutNode(cur_node,0);
out_2 = DrakonUtils.getOutNode(cur_node,1); 
							//-- ������ ����� ����� ������ ��� ����� ������?
							if(DrakonUtils.getIconType(out_1).equals(DI_SUB_COMPIL) || DrakonUtils.getIconType(out_1).equals(DI_SI_END)) {
							} else {
								//-- ������ ������� ������
								out_1 = DrakonUtils.getOutNode(cur_node,1);
out_2 = DrakonUtils.getOutNode(cur_node,0); 
								//-- ������ ����� ����� ������ ��� ����� ������?
								if(DrakonUtils.getIconType(out_1).equals(DI_SUB_COMPIL) || DrakonUtils.getIconType(out_1).equals(DI_SI_END)) {
								} else {
									//-- ��������� ������� ����� ������! � ����� ����� ������ ... ������������ ��� ������!
									str = "��������� ������� ����� ������!  � ����� \"" + comment + "\" ������������ ��� ������!\n";
DrakonUtils.error(str); 
									//-- ������
									return false; 
								}
							}
							//-- ������ ����� ������ ��������� ��� ��������?
							if(DrakonUtils.getIconType(out_2).equals(DI_SH_BEG)
|| DrakonUtils.getIconType(out_2).equals(DI_PROC_BEG) 
|| DrakonUtils.getIconType(out_2).equals(DI_ACTION) ) {
							} else {
								//-- ��������� ������� ����� ������! � ����� ����� ������ ... ������������ ��� ������!
								str = "��������� ������� ����� ������!  � ����� \"" + comment + "\" ������������ ��� ������!\n";
DrakonUtils.error(str); 
								//-- ������
								return false; 
							}
						} else {
							//-- ��������� ������� ����� ������! � ����� ����� ������ ... ������ ���� 2 ������
							str = "��������� ������� ����� ������! � ����� \"" + comment + "\" ������ ���� ��� ������!\n";
DrakonUtils.error(str); 
							//-- ������
							return false; 
						}
						//-- break
						break; 
					//-- ������ ���
					default:
						//-- break
						break; 
					//--  ������ �������
					case DI_SI_BEG:
						//--  ������
						case DI_COMPIL_BEG:
							//-- �������� ����� 1?
							if(DrakonUtils.getOutDegree(cur_node) == 1) {
								//-- ������� ������ �����
								out_1 = DrakonUtils.getOutNode(cur_node,0); 
								//-- ��� ���.���� ������ ��������� ��� ��������?
								if(DrakonUtils.getIconType(out_1).equals(DI_SH_BEG)
|| DrakonUtils.getIconType(out_1).equals(DI_PROC_BEG) 
|| DrakonUtils.getIconType(out_1).equals(DI_ACTION) ) {
								} else {
									//-- ��������� ������� ������-1! � ����� ������ ... ������������ ��� ������!
									str = "��������� ������� ������-1! � ����� \"" + comment + "\" ������������ ��� ������!\n";
DrakonUtils.error(str); 
									//-- ������
									return false; 
								}
								//-- ������
								return true; 
							} else {
								//-- �������� ����� 2?
								if(DrakonUtils.getOutDegree(cur_node) == 2) {
									//-- ������� ������ �� �������
									out_1 = DrakonUtils.getOutNode(cur_node,0);
out_2 = DrakonUtils.getOutNode(cur_node,1); 
									//-- ������ ����� ������ � ����?
									if(DrakonUtils.getIconType(out_1).equals(DI_WR_RES_FILE)) {
										//-- ������ ����� ������ ��������� ��� ��������?
										if(DrakonUtils.getIconType(out_2).equals(DI_SH_BEG)
|| DrakonUtils.getIconType(out_2).equals(DI_PROC_BEG) 
|| DrakonUtils.getIconType(out_2).equals(DI_ACTION) ) {
										} else {
											//-- ��������� ������� ������-2! � ����� ������ ... ������������ ��� ������!
											str = "��������� ������� ������-2! � ����� \"" + comment + "\" ������������ ��� ������!\n";
DrakonUtils.error(str); 
											//-- ������
											return false; 
										}
									} else {
										//-- ������ ����� ������ � ����?
										if(DrakonUtils.getIconType(out_2).equals(DI_WR_RES_FILE)) {
											//-- ������ ����� ������ ��������� ��� ��������?
											if(DrakonUtils.getIconType(out_1).equals(DI_SH_BEG)
|| DrakonUtils.getIconType(out_1).equals(DI_PROC_BEG) 
|| DrakonUtils.getIconType(out_1).equals(DI_ACTION) ) {
											} else {
												//-- ��������� ������� ������-1! � ����� ������ ... ������������ ��� ������!
												str = "��������� ������� ������-2! � ����� \"" + comment + "\" ������������ ��� ������!\n";
DrakonUtils.error(str); 
												//-- ������
												return false; 
											}
										} else {
											//-- ��������� ������� ������-2! � ����� ������ ... ���� �� ���� ������� ������ ���� ������ � ����
											str = "��������� ������� ������-2! � ����� ������ ������ \"" + comment + "\" ���� �� ���� ������� ������ ���� ������ � ����\n";
DrakonUtils.error(str); 
											//-- ������
											return false; 
										}
									}
								} else {
									//-- ������! � ����� ������ ... �� ��� � �� ��� ������!
									str = "������! � ����� \"" + comment + "\" �� ��� � �� ��� ������!\n";
DrakonUtils.error(str); 
									//-- ������
									return false; 
								}
							}
							//-- break
							break; 
				}
			}
		}
		//-- ������
		return true;
}



	//-- ������ ����� ������� ���������� �� ����� yEd
	public void parseDrakon() { 
		//-- ������ ���
		//-- //--             
		}


	//-- ��������� �����
	protected void build_vis(Object data) { 
		//-- ������ ���
		//-- //--             
		}


	//-- ��������������� ��������
	public void zoomAll() { 
		//-- ������ ���
		//-- //--             
		}


	//-- �������� ������
	public void loadData(String query) { 
		//-- ������ ���
		//-- //--             
		}


	//-- ������������ ���������
	private void configListeners() { 
		//-- ������ ���
		//-- //--             
		}


	//-- ��������� ������� "�������� ���������"
	private void onLoadingFinesh() { 
		//-- ������ ���
		//-- //--             
		}


	//-- ��������� ����� ������������ �������� loadData()
	public void buildVis() { 
		//-- ������ ���
		//-- //--             
		}


	//-- setCurReleaseFromNode()
	public void setCurReleaseFromNode(Vertex v) { 
		//-- ������ ���
		CURRENT_RELEASE = (String) DrakonUtils.getCode(v);
 
		//-- //--             
		}


	//-- getCurRelease()
	public String getCurRelease() { 
		//-- ������ ���
		return CURRENT_RELEASE; 
		//-- //--             
		}


	//-- setCurRelease()
	public  void setCurRelease(String cur_rel) { 
		//-- ������ ���
		CURRENT_RELEASE = cur_rel; 
		//-- //--             
		}


	//-- 
            
	} //-- ����� ������ 
